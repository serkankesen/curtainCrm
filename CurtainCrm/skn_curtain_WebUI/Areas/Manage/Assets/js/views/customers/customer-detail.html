<form name="customervalid">
    <div class="page-content-wrapper1">
        <div class="portlet light">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-product"></i>
                    <span class="caption-subject bold uppercase"> Yeni Müşteri Bilgisi Ekleme </span>
                </div>
                <div class="actions">
                    <div class="btn-group">
                        <button class="btn green-haze  margin-right-10" ng-click="save()"><i class="fa fa-check-circle-o"></i> Kaydet</button>
                        <a href="#/Customer" class="btn green-haze"><i class="fa  fa-list"></i> Müşteri Listesi</a>
                    </div>
                </div>
            </div>
            <!-- End portlet-title -->
            <div class="portlet-body">
                <div class="row">
                    <div class="col-xs-12 col-sm-6">
                        <div class="form-group">
                            <label>TC Kimlik No</label>
                            <input class="form-control input-sm" type="text" placeholder="TC Kimlik No" maxlength="11" ng-model="model.IdentityNo" />
                        </div>
                        <!-- End form-group -->
                        <div class="form-group">
                            <label>Ad</label>
                            <input class="form-control input-sm" type="text" placeholder="Ad" ng-model="model.UserName" buyukyaz />
                        </div>
                        <div class="form-group">
                            <label>Soyad</label>
                            <input class="form-control input-sm" type="text" placeholder="Soyad" ng-model="model.UserSurname" buyukyaz />
                        </div>
                        <!-- End form-group -->
                        <div class="form-group">
                            <label>Telefon</label>
                            <input class="form-control input-sm" type="tel" placeholder="Telefon" ng-model="model.Phone" />
                        </div>
                        <!-- End form-group -->
                        <div class="form-group">
                            <label>Email</label>
                            <input class="form-control input-sm" type="email" placeholder="Email" rows="3" ng-model="model.Email" />
                        </div>

                    </div>

                    <div class="col-xs-12 col-sm-6">
                        <!-- End form-group -->
                        <div class="form-group">
                            <label>İl</label>
                            <select class="form-control input-sm" ng-model="model.CityId" ng-options="foo.CityId as foo.Name for foo in city" ng-change="getCity()" required>
                                <option value="" disabled>Seçiniz</option>
                            </select>
                        </div>
                        <!-- End form-group -->
                        <div class="form-group">
                            <label>İlçe</label>
                            <select class="form-control input-sm" ng-model="model.CountyId" ng-options="foo.CountyId as foo.Name for foo in county">
                                <option value="" disabled>Seçiniz</option>
                            </select>
                        </div>
                        <!-- End form-group -->
                        <div class="form-group">
                            <label>Açık Adres</label>
                            <textarea class="form-control input-sm" placeholder="Adres" rows="2" ng-model="model.OpenAddress"></textarea>
                        </div>
                        <!-- End form-group -->
                        <div class="form-group">
                            <label>Notlar</label>
                            <textarea class="form-control input-sm" placeholder="Not" rows="2" ng-model="model.Description"></textarea>
                        </div>
                    </div>
                    <!-- End form-horizontal -->
                </div>
                <!-- End row -->
            </div>
            <!-- End portlet-body -->
        </div>
        <!-- End portlet -->
        <!--div eklenecek-->
        <!-- End portlet grey -->
    </div>
    <div class="page-content-wrapper1">
        <div class="portlet light">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-product"></i>
                    <span class="caption-subject bold uppercase"> Perde Ölçü Bilgileri </span>
                </div>

            </div>
            <div class="portlet-body">
                <div class="row">
                    <div class="col-xs-12 col-sm-2">
                        <div class="form-group">
                            <a ng-click='e1()' class='btn blue-steel'>
                                <span class='md-click-circle' style='height: 365px; width: 365px; top: -141.5px; left: -46px;'></span>
                                <em>Oda bilgisi giriniz</em>
                            </a>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-10">
                        <div class="form-group">
                            <div class="portlet box blue-steel" ng-repeat="item in model.CurtainInfoes">
                                <div class="portlet-title ">
                                    <div class="caption">
                                        <span class="caption-subject bold uppercase">
                                            {{item.yeni==1?'Yeni':''}} Oda bilgisi giriniz
                                        </span>
                                    </div>
                                    <div class="tools">
                                        <a ng-click="splice($index, model.CurtainInfoes[$index].ID,item.sayi)" class="remove" data-original-title="Kaldır" title=""></a>
                                    </div>
                                </div>
                                <div class="portlet-body">
                                    <div class="portlet light bordered">
                                        <div class="portlet-title">
                                            <div class="caption">
                                                <span class="caption-subject bold uppercase">{{model.CurtainInfoes[$index].Room}}</span>
                                            </div>
                                            <div class="tools">
                                                <a href="javascript:;" class="collapse" data-original-title="Kapat / Aç" title=""></a>
                                            </div>
                                        </div>
                                        <div class="portlet-body">
                                            <div class="form-group">
                                                <input class="form-control input-sm" type="text" placeholder="Oda İsmi Giriniz" ng-model="model.CurtainInfoes[$index].Room" />
                                            </div>
                                            <div class="form-group">
                                                <input class="form-control input-sm" type="number" placeholder="Yükseklik Giriniz" min="0" ng-model="model.CurtainInfoes[$index].Height" />
                                            </div>
                                            <div class="form-group">
                                                <textarea class="form-control input-sm" placeholder="Bilgi Giriniz" ng-model="model.CurtainInfoes[$index].Description" />
                                            </div>
                                            <div class="form-group">
                                                <div id="hiddenelements">
                                                    <table class="table table-responsive">
                                                        <tr ng-repeat="path in model.CurtainInfoes[$index].Pictures">
                                                            <td> {{$index+1}} </td>
                                                            <td>
                                                                <a class="fancybox-button" href="/Images/Image/{{path.FileName}}">
                                                                    <img src="{{path.path}}" style="width: 50px; height: 50px;">
                                                                </a>
                                                            </td>
                                                            <td>
                                                                {{path.FileName| limitTo:20 | htmlToPlaintext}}
                                                            </td>

                                                            <td>
                                                                <button ng-click="removeFile(path)" class="btn btn-default btn-sm">
                                                                    <i class="fa fa-times"></i>
                                                                </button>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </div>
                                                <div class="form-group">
                                                    <span>
                                                        <label>Resim</label>
                                                        <input id="fileupload" type="file" multiple name="files[]">
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-actions" ng-show="showCommit">
                    <div class="row">
                        <div class="margin-right-10 pull-right">
                            <button class="btn green-haze  margin-right-10 btn-sm" ng-click="save()"><i class="fa fa-check-circle-o"></i> Kaydet</button>
                            <a href="#/Customer" class="btn btn-sm green-haze"><i class="fa  fa-list"></i> Müşteri Listesi</a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End portlet -->
            <!--div eklenecek-->
            <!-- End portlet grey -->
        </div>
</form>
    <script type="text/javascript">
        $(".fancybox-button").fancybox({
            closeBtn: true,
            loop: false,
            helpers: {
                title: {
                    type: 'inside'
                }
            }
        });
        $('#fileupload').fileupload({
            dataType: 'json',
            url: 'Driver/MultiImageUpload',
            autoUpload: true,
            add: function (e, data) {
                var uploadErrors = [];
                var acceptFileTypes = [".jpg", ".jpeg", ".png", ".gif", ".JPG", ".JPEG", ".PNG", ".GIF"];
                var ext = data.originalFiles[0]['name'].substring(data.originalFiles[0]['name'].lastIndexOf('.'));
                console.log(data);
                if (data.originalFiles[0]['type'].length && !(acceptFileTypes.indexOf(ext) > -1)) {
                    uploadErrors.push('Desteklenmeyen dosya formatı');
                }
                if (data.originalFiles[0]['size'].length && data.originalFiles[0]['size'] > 10000000) {
                    uploadErrors.push('Dosya boyutu çok büyük.Dosya boyutunuz 10MB\'ı geçmemelidir.');
                }
                if (uploadErrors.length > 0) {
                    alert(uploadErrors.join("\n"));
                } else {
                    data.submit();
                }
            }
            //})
            //.on('fileuploadprogressall', function (e, data) {
            //    var progress = parseInt(data.loaded / data.total * 100, 10);
            //    $('.progress .progress-bar').css('width', progress + '%');
            //    $('#progtxt').text(progress + '%');
        }).on('fileuploadsubmit', function (e, data) {
            // The example input, doesn't have to be part of the upload form:
            //var rootfolder = $('#roothdn').val();
            //data.formData = { clientsub: rootfolder };
            //$('#progressWrapper').show();

        });

        $(document).on("click", "a.fileDownload", function () {
            $.fileDownload($(this).prop('href'))
                .done(function () { alert('File download a success!'); })
                .fail(function () { alert('File download failed!'); });
            return false; //this is critical to stop the click event which will trigger a normal file download
        });
    </script>
    <!--<div class="row horizantal-box" ng-repeat="sitem in model.CurtainInfoes[$index].Columns">
        <button class="remove" ng-click="splicese1($index, item.sayi,sitem.sayi, sitem.ID)"><i class="fa fa-times-circle"></i></button>
        <input type="hidden" ng-model="sitem.isActive" value="true" />
        <div class="form-group col-xs-12 col-sm-3">
            <label>Bölge</label>
            <input class="form-control input-sm" type="text" ng-model="sitem.ColumnName" />
        </div>
        <div class="form-group col-xs-12 col-sm-3">
            <label>En</label>
            <input class="form-control input-sm" type="number" min="0" ng-model="sitem.ColumnWidth" />
        </div>
        <div class="form-group col-xs-12 col-sm-6">
            <label>Açıklama</label>
            <input class="form-control input-sm" type="text" ng-model="sitem.Description" />
        </div>
    </div>-->
